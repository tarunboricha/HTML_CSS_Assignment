public class CommentService
{
    private readonly ApplicationDbContext _context;

    public CommentService(ApplicationDbContext context)
    {
        _context = context;
    }

    public async Task<List<CommentDto>> GetCommentsByPostId(int postId)
    {
        var comments = await _context.Comments
            .Where(c => c.PostId == postId)
            .Select(c => new CommentDto
            {
                CommentText = c.Comment1,
                UserName = c.UserName,
                UserProfileUrl = c.UserNameNavigation.ProfileUrl,
                CommentedAt = c.CommentedAt
            })
            .ToListAsync();

        return comments;
    }
}



<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#commentsModal" (click)="loadComments(postId)">
  Show Comments
</button>

<div class="modal fade" id="commentsModal" tabindex="-1" aria-labelledby="commentsModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="commentsModalLabel">Comments</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <app-comments [postId]="selectedPostId"></app-comments>
      </div>
    </div>
  </div>
</div>



<div *ngFor="let comment of comments" class="comment">
  <div class="comment-user">
    <img [src]="comment.userProfileUrl" alt="{{ comment.userName }}">
    <span>{{ comment.userName }}</span>
  </div>
  <div class="comment-text">
    <p>{{ comment.commentText }}</p>
  </div>
  <div class="comment-date">
    <small>{{ comment.commentedAt | date }}</small>
  </div>
</div>

